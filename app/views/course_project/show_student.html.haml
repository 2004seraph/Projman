-# Show all features students get for chosen project

.separating-section
    .d-flex.align-items-center.justify-content-between
        %h2
            #{@proj_name}
        -if @show_group_information
            .flex-end
                %button.btn.btn-primary.btn-m.m-2{type: "button", "data-bs-toggle": "modal",
                   "data-bs-target": "#reportIssueModal"}
                    %i.bi.bi-exclamation-circle.orange
                    Report Issue
    %h2
        -if @show_group_information
            #{@group_name}
    %hr.divider

    -if @show_pref_form
        = render partial: 'course_project/components/pref-form-box'

    -if @show_group_information && @show_proj_form
        = render partial: 'course_project/components/project-choices-box'

    = render partial: 'course_project/components/staff-info-box'

    -if @show_group_information
        = render partial: 'course_project/components/team-info-box'

    = render partial: 'course_project/components/deadlines-info-box'
    = render partial: 'course_project/components/mark-scheme-box'

    -if @show_group_information
        = render partial: 'course_project/components/team-chat-box'

.modal.fade{ id: "reportIssueModal", tabindex: "-1", "aria-labelledby": "reportIssueModal", "aria-hidden": "true", "data-disallow-confirm-empty-input": "" }
    .modal-dialog.modal-dialog-centered.modal-dialog-scrollable#reportIssueModalDialog
        .modal-content{id: "modalContent"}
            = form_with(url: "/issues", method: "post", local: false, id: "issue-form") do |form|
                .modal-header
                    %h1.modal-title.fs-5= "Report Issue"
                    %button.btn-close{ "aria-label": "Close", "data-bs-dismiss": "modal", type: "button" }
                    %input{ type: "hidden", name: "project_id", value: "#{@current_project.id}"}
                    %input{ type: "hidden", name: "author", value: "#{current_user.givenname} #{current_user.sn}"}
                .modal-body
                    .form-group
                        = form.label :title
                        = form.text_field :title, class: "form-control", placeholder: "Enter issue title", required: true
                    .form-group
                        = form.label :description
                        = form.text_area :description, class: "form-control", rows: 5, placeholder: "Enter issue description", required: true
                .modal-footer
                    %button.btn.btn-primary{ type: "submit", id: "submit-form" } Submit

#success-message.alert.alert-success{style: "display: none;"}
    Issue submitted successfully!

